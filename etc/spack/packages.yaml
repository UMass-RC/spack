packages:
  all:
    permissions:
      read: world
      write: user
      group: package-maintainer
    compiler: [gcc@9.4.0]
    # IF WE'RE USING ENVIRONMENTS ANYMORE, be sure that these providers are up
    # to date with the lists in spack.yaml
    providers:
      mpi: [openmpi]
      blas: [intel-mkl]
    variants:
    #- "cuda_arch=52,61,70,75,80,86" # the ones we have in unity as of 8/2022
    - "cuda_arch=52,53,60,61,62,70,72,75,80,86" # all existing arches >= 52 as of 8/2022
  # raises error, cannot set suid with group writable
  openssh:
    permissions:
      write: user
  openmpi:
    variants:
    # default mpi would like our slurm to have pmix but it doesn't, it'll have to make do with pmi
    - "+pmi"
    - "schedulers=slurm"
    - "+legacylaunchers"
  # texlive build fails, but we have a by-hand module
  texlive:
    version: [20220000]
    buildable: false
    externals:
    - spec: texlive@20220000
      modules:
      - texlive/2022
  slurm:
    version: [20.02.7]
    buildable: false
    externals:
    - spec: slurm@20.02.7
      prefix: /usr
  pmix:
    version: [3.1.5-1]
    buildable: false
    externals:
    - spec: pmix@3.1.5-1
      prefix: /usr/lib/x86_64-linux-gnu/pmix/
